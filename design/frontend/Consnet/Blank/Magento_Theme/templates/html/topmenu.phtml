<?php
/**
 * Copyright Â© Magento, Inc. All rights reserved.
 * See COPYING.txt for license details.
 */

// @codingStandardsIgnoreFile

?>
<?php
/**
 * Top menu for store
 *
 * @var $block \Magento\Theme\Block\Html\Topmenu
 */
?>
<style type="text/css">

/*#proceed_to_checkout{
    margin-top: 50px;
}*/

</style>
<?php
/*$om = \Magento\Framework\App\ObjectManager::getInstance();
$helper = $om->create('Consnet\Api\Helper\Data');
$NAMESPACE_ID = $helper->getGeneralConfig('namespace_text');*/

/*//$quote = $om->create('\Magento\Checkout\Model\Cart')->getQuote();
$customerModel = $om->create('Magento\Customer\Model\Customer')->setWebsiteId(0);
//$customerModel
$count = 0;
if(isset($_SESSION['email'])){
    $customerSession = $om->get('Magento\Customer\Model\Session');
    //$companydata = $block->getCompanyData($customerSession->getId());
    //var_dump($customerSession->getId());
    $customer = $customerModel->load($customerSession->getId());//loadByEmail($_SESSION['email']);
    $quoteFactory = $om->create('\Magento\Quote\Model\QuoteFactory');
    $quote = $quoteFactory->create()->loadByCustomer($customer);
    //var_dump($customer->getId());
    //$quote = $om->get('\Magento\Checkout\Model\Session')->getQuote();
    //count($quote->getItemsCount());
    foreach ($quote->getAllVisibleItems() as $items) {
        $count = $count + 1;
    }//var_dump($quote->getId());
}*/

//var_dump($count);
//isset($_SESSION['kunnr']) &&

$columnsLimit = $block->getColumnsLimit() ?: 0; ?>
<?php $_menu = $block->getHtml('level-top', 'submenu', $columnsLimit) ?>

<nav class="navigation" data-action="navigation">
    <ul data-mage-init='{"menu":{"responsive":true, "expanded":true, "position":{"my":"left top","at":"left bottom"}}}'>
        <?= /* @escapeNotVerified */ $_menu ?>
        <?= /* @escapeNotVerified */ $block->getChildHtml() ?>
        <!--<li id='liCheckout' style="float:right; margin-top: 4px; display:none;" class="level0 nav-5 last level-top ui-menu-item hidden" role="presentation">-->
            
        <!--<a class="level-top ui-corner-all" tabindex="-1" role="menuitem">
                Cart: 
                <span id='itemcounter' class="counter-number"></span> 
                items
                <button type="button" class="action primary checkout"  id="proceed_to_checkout" style="">
                    CHECKOUT 
                </button>               
            </a>
        </li>-->
    </ul>
</nav>

<!--<?php /*echo "<form id='viewCartForm' action='http://".$NAMESPACE_ID."/erporder/Index/Index' method='post'>";*/ ?>
    <input type="text" id="view" value='1' class="hidden"/>
</form>-->

<script type="text/javascript">
/*var proceed = document.getElementById('proceed_to_checkout');
if(proceed != null){
    proceed.addEventListener("click", function () {
        var span = document.getElementById('itemcounter');
        if(span.textContent == null || span.textContent == '' || span.textContent == 'underfined'){
            console.log(span.textContent);
        }else{
            window.location = "<?php /*echo "http://".$NAMESPACE_ID."/checkout/ ";*/?>";
            require(['jquery'], function($){
                $('viewCartForm').submit(function (event){
                    console.log();
                });
            });
        }
    });
}*/
    require(
        [
            'jquery'
        ],
        function($) {
            $(function() {
                //console.log('> TRACKING CHANGE 18');
                $(window).load(function() {
                    //console.log('TRACKING CHANGE 18');
                    var cartNavBtn = $('nav.navigation > ul > li.last');
                    //var initialContent = cartNavBtn.html();
                    var cartPrefix = '<i style="color: white; padding: 10px;">Cart: '; //style="background-color: white; color: #417cf3; padding: 10px;"
                    var cartItems = '<span id="itemcounter" class="counter-number">0</span>';
                    var cartSuffix = ' item(s) </i> |';

                    var prependedText = cartPrefix + cartItems + cartSuffix;

                    // $('a#ui-id-8').hide();
                    cartNavBtn.prepend(prependedText);

                    //console.log('cart content: ' + initialContent);
                });
            });
        }
    );
</script>